(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60ba8d0e"],{"2d3b":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search"},[e("div",{staticClass:"search-box"},[e("van-search",{attrs:{shape:"round",background:"#fefefe",placeholder:"请输入搜索关键词"},on:{input:t.onInput,clear:t.toggleBigBox,search:t.getResultList},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1),t.isSure?[t.show?e("div",{staticClass:"hotSearch"},[e("p",[t._v("热门搜索")]),e("ul",{staticClass:"hotUl"},t._l(t.hotSearch,(function(s,i){return e("li",{key:i,staticClass:"hotLi",on:{click:function(e){return t.gethotSearch(s)}}},[t._v(t._s(s.first))])})),0),e("ul",{staticClass:"searchUl"},t._l(t.historyList,(function(s,i){return e("li",{key:i,staticClass:"searchLi",on:{click:function(e){return t.getLiSearch(s)}}},[e("div",{staticClass:"icon icon1"}),e("div",{staticClass:"item"},[t._v(" "+t._s(s)+" "),e("div",{staticClass:"icon del",on:{click:function(s){return s.stopPropagation(),t.toDelHistury(i)}}})])])})),0)]):e("ul",{staticClass:"searchUl"},t._l(t.findOutList,(function(s,i){return e("li",{key:i,staticClass:"searchLi",on:{click:function(e){return t.getHSearch(s)}}},[e("div",{staticClass:"icon icon2"}),e("div",{staticClass:"item"},[t._v(t._s(s.keyword))])])})),0)]:[e("div",{staticClass:"list"},t._l(t.resultList,(function(s,i){return e("NewSongList",{key:i,attrs:{newSongItem:s,songInfo:{isShowInfo:!0,newSongItem:s,isSearch:i}},on:{"current-song":function(s){return t.$emit("current-song",s)}}})})),1)]],2)},n=[],a=(e("c975"),e("a434"),e("1678")),o={name:"Search",data:function(){return{value:"",hotSearch:[],findOutList:[],resultList:[],historyList:[],show:!0,isSure:!0,isSearch:""}},components:{NewSongList:a["a"]},methods:{getHotSearch:function(){var t=this;this.axios.get("/search/hot").then((function(s){t.hotSearch=s.data.result.hots,t.firstSix(),window.localStorage.setItem("hotSearch",JSON.stringify({expire:Date.now()+36e5,result:s.data.result.hots}))})).catch((function(t){}))},onInput:function(){var t=this;this.show=!1,this.axios.get("/search/suggest",{params:{keywords:this.value,type:"mobile"}}).then((function(s){t.findOutList=s.data.result.allMatch})).catch((function(t){}))},getResultList:function(){var t=this;this.isSure=!1,this.show=!1,this.toOnly(this.historyList,this.value);var s=JSON.parse(window.localStorage.getItem("resultList"+this.value));s&&s.expire>Date.now()?this.resultList=s.result:this.axios.get("/search",{params:{keywords:this.value}}).then((function(s){t.resultList=s.data.result.songs,window.localStorage.setItem("resultList"+t.value,JSON.stringify({expire:Date.now()+36e5,result:s.data.result.songs})),window.localStorage.setItem("historyList",JSON.stringify(t.historyList))})).catch((function(t){}))},gethotSearch:function(t){this.value=t.first,this.getResultList()},getHSearch:function(t){this.value=t.keyword,this.getResultList()},getLiSearch:function(t){this.value=t,this.getResultList()},toggleBigBox:function(){this.show=!0,this.isSure=!0},toDelHistury:function(t){this.historyList.splice(t,1),window.localStorage.setItem("historyList",JSON.stringify(this.historyList))},toOnly:function(t,s){-1==t.indexOf(s)&&t.unshift(this.value)}},created:function(){var t=JSON.parse(window.localStorage.getItem("hotSearch"));t&&t.expire>Date.now()?this.hotSearch=t.result:this.getHotSearch();var s=JSON.parse(window.localStorage.getItem("historyList"));this.historyList=s||[]}},r=o,c=(e("3e09"),e("2877")),u=Object(c["a"])(r,i,n,!1,null,"23996056",null);s["default"]=u.exports},"3e09":function(t,s,e){"use strict";var i=e("cb42"),n=e.n(i);n.a},c975:function(t,s,e){"use strict";var i=e("23e7"),n=e("4d64").indexOf,a=e("a640"),o=e("ae40"),r=[].indexOf,c=!!r&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),l=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(t){return c?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},cb42:function(t,s,e){}}]);
//# sourceMappingURL=chunk-60ba8d0e.9fc17731.js.map