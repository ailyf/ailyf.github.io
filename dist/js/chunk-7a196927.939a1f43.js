(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a196927"],{"2d3b":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"search"},[i("div",{staticClass:"search-box"},[i("van-search",{attrs:{shape:"round",background:"#fefefe",placeholder:"请输入搜索关键词"},on:{input:t.onInput,clear:t.toggleBigBox,search:t.getResultList},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1),t.isSure?[t.show?i("div",{staticClass:"hotSearch"},[i("p",[t._v("热门搜索")]),i("ul",{staticClass:"hotUl"},t._l(t.hotSearch,(function(s,e){return i("li",{key:e,staticClass:"hotLi",on:{click:function(i){return t.gethotSearch(s)}}},[t._v(t._s(s.first))])})),0),i("ul",{staticClass:"searchUl"},t._l(t.historyList,(function(s,e){return i("li",{key:e,staticClass:"searchLi",on:{click:function(i){return t.getLiSearch(s)}}},[i("div",{staticClass:"icon icon1"}),i("div",{staticClass:"item"},[t._v(" "+t._s(s)+" "),i("div",{staticClass:"icon del",on:{click:function(s){return s.stopPropagation(),t.toDelHistury(e)}}})])])})),0)]):i("ul",{staticClass:"searchUl"},t._l(t.findOutList,(function(s,e){return i("li",{key:e,staticClass:"searchLi",on:{click:function(i){return t.getHSearch(s)}}},[i("div",{staticClass:"icon icon2"}),i("div",{staticClass:"item"},[t._v(t._s(s.keyword))])])})),0)]:[i("div",{staticClass:"list"},t._l(t.resultList,(function(s,e){return i("NewSongList",{key:e,attrs:{newSongItem:s,songInfo:{isShowInfo:!0,newSongItem:s,isSearch:e}},on:{"current-song":function(s){return t.$emit("current-song",s)}}})})),1)]],2)},n=[],a=(i("c975"),i("a434"),i("1678")),o={name:"Search",data:function(){return{value:"",hotSearch:[],findOutList:[],resultList:[],historyList:[],show:!0,isSure:!0,isSearch:""}},components:{NewSongList:a["a"]},methods:{getHotSearch:function(){var t=this;this.axios.get("/search/hot").then((function(s){t.hotSearch=s.data.result.hots,t.firstSix(),window.localStorage.setItem("hotSearch",JSON.stringify({expire:Date.now()+36e5,result:s.data.result.hots}))})).catch((function(t){}))},onInput:function(){var t=this;this.show=!1,this.axios.get("/search/suggest",{params:{keywords:this.value,type:"mobile"}}).then((function(s){t.findOutList=s.data.result.allMatch})).catch((function(t){}))},getResultList:function(){var t=this;this.isSure=!1,this.show=!1,this.toOnly(this.historyList,this.value);var s=JSON.parse(window.localStorage.getItem("resultList"+this.value));s&&s.expire>Date.now()?this.resultList=s.result:this.axios.get("/search",{params:{keywords:this.value}}).then((function(s){t.resultList=s.data.result.songs,window.localStorage.setItem("resultList"+t.value,JSON.stringify({expire:Date.now()+36e5,result:s.data.result.songs})),window.localStorage.setItem("historyList",JSON.stringify(t.historyList))})).catch((function(t){}))},gethotSearch:function(t){this.value=t.first,this.getResultList()},getHSearch:function(t){this.value=t.keyword,this.getResultList()},getLiSearch:function(t){this.value=t,this.getResultList()},toggleBigBox:function(){this.show=!0,this.isSure=!0},toDelHistury:function(t){this.historyList.splice(t,1),window.localStorage.setItem("historyList",JSON.stringify(this.historyList))},toOnly:function(t,s){-1==t.indexOf(s)&&t.unshift(this.value)}},created:function(){var t=JSON.parse(window.localStorage.getItem("hotSearch"));t&&t.expire>Date.now()?this.hotSearch=t.result:this.getHotSearch();var s=JSON.parse(window.localStorage.getItem("historyList"));this.historyList=s||[]}},r=o,c=(i("8869"),i("2877")),u=Object(c["a"])(r,e,n,!1,null,"f77b20d0",null);s["default"]=u.exports},8869:function(t,s,i){"use strict";var e=i("cc69"),n=i.n(e);n.a},c975:function(t,s,i){"use strict";var e=i("23e7"),n=i("4d64").indexOf,a=i("a640"),o=i("ae40"),r=[].indexOf,c=!!r&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),l=o("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(t){return c?r.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},cc69:function(t,s,i){}}]);
//# sourceMappingURL=chunk-7a196927.939a1f43.js.map